name: Main Branch Merge & FTP Copy

on:
Â  workflow_dispatch:
jobs:
Â  build:
Â  Â  runs-on: ubuntu-latest
Â  Â  steps:
Â  Â  - name: Check if it's a merge to main
Â  Â  Â  run: |
Â  Â  Â  Â  if [ "${{ github.event_name }}" == "push" ] && [ "${{ github.ref }}" == "refs/heads/main" ]; then
Â  Â  Â  Â  Â  echo "Branch is 'main', proceeding..."
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "Branch is not 'main', exiting..."
Â  Â  Â  Â  Â  exit 0
Â  Â  Â  Â  fi
Â  web-deploy:
Â  Â  name: Deploy
Â  Â  runs-on: ubuntu-latest
Â  Â  steps:
Â  Â  - name: Get latest code
Â  Â  Â  uses: actions/checkout@v3

Â  Â  - name: ðŸ“‚ Sync files
Â  Â  Â  uses: SamKirkland/FTP-Deploy-Action@v4.3.4
Â  Â  Â  with:
Â  Â  Â  Â  server: ${{ secrets.FTP_URL }}
Â  Â  Â  Â  username: ${{ secrets.FTP_USER }}
Â  Â  Â  Â  password: ${{ secrets.FTP_PASSWORD }}
Â  Â  Â  Â  exclude: |
Â  Â  Â  Â  Â  **/.git*
Â  Â  Â  Â  Â  **/.git*/**
Â  Â  Â  Â  Â  **/archive/**
Â  Â  Â  Â  Â  README.md
